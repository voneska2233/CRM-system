# CRM-Система для Управления Продавцами и Транзакциями

## Описание проекта

CRM-система предназначена для управления данными о продавцах и их транзакциях. Она поддерживает функции создания, чтения, обновления и удаления данных, а также предоставляет аналитику для анализа продуктивности продавцов и их транзакций за определенные периоды.

## Функциональность API

### Продавцы (Sellers)

1. **Список всех продавцов**
   - **Метод:** `GET`
   - **URL:** `/api/sellers`
   - **Описание:** Возвращает список всех зарегистрированных продавцов.

2. **Информация о конкретном продавце**
   - **Метод:** `GET`
   - **URL:** `/api/sellers/{id}`
   - **Описание:** Возвращает информацию о продавце по его идентификатору.

3. **Создать нового продавца**
   - **Метод:** `POST`
   - **URL:** `/api/sellers`
   - **Описание:** Добавляет нового продавца в систему.
   - **Тело запроса (JSON):**
     ```json
     {
       "name": "Имя продавца",
       "contactInfo": "Контактная информация"
     }
     ```
4. **Обновить информацию о продавце**
   - **Метод:** `PUT`
   - **URL:** `/api/sellers/{id}`
   - **Описание:** Обновляет информацию о существующем продавце по идентификатору.
   - **Тело запроса (JSON):**
     ```json
     {
       "name": "Новое имя",
       "contactInfo": "Новая контактная информация"
     }
     ```

5. **Удалить продавца**
   - **Метод:** `DELETE`
   - **URL:** `/api/sellers/{id}`
   - **Описание:** Удаляет продавца по его идентификатору.

### Транзакции (Transactions)

1. **Список всех транзакций**
   - **Метод:** `GET`
   - **URL:** `/api/transactions`
   - **Описание:** Возвращает список всех транзакций.

2. **Информация о конкретной транзакции**
   - **Метод:** `GET`
   - **URL:** `/api/transactions/{id}`
   - **Описание:** Возвращает информацию о транзакции по ее идентификатору.

3. **Создать новую транзакцию**
   - **Метод:** `POST`
   - **URL:** `/api/transactions`
   - **Описание:** Добавляет новую транзакцию для продавца.
   - **Тело запроса (JSON):**
     ```json
     {
       "sellerId": { Идентификатор продавца },
       "amount": { Неотрицательное число },
       "paymentType": { Тип транзакции: CASH, CARD, TRANSFER } 
     }
     ```

4. **Получить все транзакции продавца**
   - **Метод:** `GET`
   - **URL:** `/api/transactions/seller/{sellerId}`
   - **Описание:** Возвращает все транзакции для конкретного продавца.

### Аналитика

1. **Получить самого продуктивного продавца за день**
   - **Метод:** `GET`
   - **URL:** `/api/analytics/top-seller/day`
   - **Описание:** Возвращает продавца с наибольшей суммой транзакций за указанный день.
   - **Параметры:**
     - `date`: Дата в формате `yyyy-MM-dd`.

2. **Получить самого продуктивного продавца за месяц**
   - **Метод:** `GET`
   - **URL:** `/api/analytics/top-seller/month`
   - **Описание:** Возвращает продавца с наибольшей суммой транзакций за указанный месяц и год.
   - **Параметры:**
     - `year`: Год.
     - `month`: Месяц (от 1 до 12).
  
3. **Получить самого продуктивного продавца за квартал**
   - **Метод:** `GET`
   - **URL:** `/api/analytics/top-seller/quarter`
   - **Описание:** Возвращает продавца с наибольшей суммой транзакций за указанный квартал и год.
   - **Параметры:**
     - `year`: Год.
     - `quarter`: Квартал (от 1 до 4).
    
4. **Получить самого продуктивного продавца за год**
   - **Метод:** `GET`
   - **URL:** `/api/analytics/top-seller/year`
   - **Описание:** Возвращает продавца с наибольшей суммой транзакций за указанный год.
   - **Параметры:**
     - `year`: Год.

5. **Получить список продавцов с суммой транзакций меньше пороговой за период**
   - **Метод:** `GET`
   - **URL:** `/api/analytics/below-threshold`
   - **Описание:** Возвращает список продавцов, чьи транзакции за указанный период меньше указанной суммы.
   - **Параметры:**
     - `startDate`: Дата начала периода в формате `yyyy-MM-dd`.
     - `endDate`: Дата окончания периода в формате `yyyy-MM-dd`.
     - `threshold`: Пороговая сумма.

## Инструкция по запуску
1. **Клонируйте репозиторий**
2. **Java 21, Gradle - система для сборки и управлениями зависимостями**
3. **Запустите проект**
4. **Использовать либо команду curl { тип запроса } http://localhost:8080/{API}, либо использовать браузер и ввести в адресной строке http://localhost:8080/{API}, либо использовать Postman для просмотра результата**

## Необходимые зависимости
- **Spring Boot Starter Web** — для создания REST API.
- **Spring Boot Starter Data JPA** — для работы с базой данных через JPA.
- **Spring Boot Starter Validation** — для валидации данных.
- **PostgreSQL** — драйвер для работы с базой данных PostgreSQL.
- **Lombok** — для упрощения написания геттеров/сеттеров.
- **JUnit 5** — для модульного тестирования.
- **Mockito** — для создания mock-объектов при тестировании.
- **H2 Database** — база данных для тестирования в режиме "in-memory".

## Примеры использования API
- **Описание:** Возвращает продавца с наибольшей суммой транзакций за указанный квартал и год.
 - **URL:** `http://localhost:8080/api/analytics/top-seller/quarter?year=2024&quarter=4
 - **Вывод:**
   {
    "id": 40,
    "name": "Александр Смирнов",
    "contactInfo": "alexander@example.com",
    "registrationDate": "2024-10-20T20:51:20.323546"
}
   
